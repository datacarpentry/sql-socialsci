<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Data Management with SQL for Social Scientists *alpha*: Creating tables and views</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png"><link rel="manifest" href="site.webmanifest"><link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"></head><body>
    <header id="top" class="navbar navbar-expand-md navbar-light bg-white top-nav data"><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-6">
      <div class="large-logo">
        <img alt="Data Carpentry" src="assets/images/data-logo.svg"><abbr class="badge badge-light" title="This lesson is in the alpha phase, which means that it has been taught once and lesson authors are iterating on feedback." style="background-color: #FFC700; border-radius: 5px">
          <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#field-testing-alpha-stage" class="external-link alert-link" style="color: #383838">
            <i aria-hidden="true" class="icon" data-feather="alert-triangle" style="border-radius: 5px"></i>
            Alpha
          </a>
          <span class="visually-hidden">This lesson is in the alpha phase, which means that it has been taught once and lesson authors are iterating on feedback.</span>
        </abbr>
        
      </div>
    </div>
    <div class="selector-container">
      
      
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/07-creating-tables-views.html';">Instructor View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl navbar-light bg-white bottom-nav data" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Data Carpentry" src="assets/images/data-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Data Management with SQL for Social Scientists *alpha*
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Data Management with SQL for Social Scientists *alpha*
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="discuss.html">Discussion</a></li><li><a class="dropdown-item" href="reference.html">Glossary</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Data Management with SQL for Social Scientists *alpha*
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 52%" class="percentage">
    52%
  </div>
  <div class="progress data">
    <div class="progress-bar data" role="progressbar" style="width: 52%" aria-valuenow="52" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/07-creating-tables-views.html">Instructor View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->
      
            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-relational-database.html">1. What is a relational database?</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-db-browser.html">2. Using DB Browser for SQLite</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-select.html">3. The Select Statement</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-missing-data.html">4. Missing Data</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-creating-new-columns.html">5. Creating New Columns</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-aggregation.html">6. Aggregations</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        7. Creating tables and views
        </span>
      </button>
    </div><!--/div.accordion-header-->
        
    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#using-sql-code-to-create-tables">Using SQL code to create tables</a></li>
<li><a href="#using-the-db-browser-application-to-create-tables">Using the DB Browser application to create tables</a></li>
<li><a href="#creating-a-table-using-an-sql-command">Creating a table using an SQL command</a></li>
<li><a href="#creating-tables-from-other-tables">Creating tables from other tables</a></li>
<li><a href="#using-sql-code-to-create-views">Using SQL code to create views</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="08-sqlite-command-line.html">8. The SQLite command line</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="09-joins.html">9. Joins</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush11">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading11">
        <a href="10-other-environments.html">10. Using database tables in other environments</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="discuss.html">Discussion</a></li><li><a href="reference.html">Glossary</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width resources"><a href="aio.html">See all in one page</a>
            

            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">
            
            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="06-aggregation.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="08-sqlite-command-line.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="06-aggregation.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Aggregations
        </a>
        <a class="chapter-link float-end" href="08-sqlite-command-line.html" rel="next">
          Next: The SQLite command... 
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Creating tables and views</h1>
        <p>Last updated on 2023-05-02 |
        
        <a href="https://github.com/datacarpentry/sql-socialsci/edit/main/episodes/07-creating-tables-views.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
        
        
        
        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>What is the difference between a table and a view?</li>
<li>How can I create a table using the DB Browser for SQLite?</li>
<li>How can I create a table or view in DB Browser for SQLite using SQL
code?</li>
<li>How can I add records of data to a table?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Understand the differences and similarities between Tables and
Views</li>
<li>Create table schemas using DB Browser for SQLite</li>
<li>Create table schemas and views using SQL code</li>
<li>Populate a table using SQL code</li>
<li>Populate a table from a file of data using DB Browser for
SQLite</li>
</ul></div>
</div>
</div>
</div>
</div>
<section id="using-sql-code-to-create-tables"><h2 class="section-heading">Using SQL code to create tables<a class="anchor" aria-label="anchor" href="#using-sql-code-to-create-tables"></a>
</h2>
<hr class="half-width"><p>In relational databases, tables have to be created before you can add
data to them. The table definition that you create is referred to as the
<strong>Schema</strong> of the table.</p>
<p>The schema can contain many different properties of the table and the
data that it does/will contain. In its simplest form you only need to
specify a name for the table and a list of the column names and the data
types for each of those columns.</p>
<p>In this episode we will also show how the Farms, Plots and Crops
tables were created and populated from csv files. When we do this using
DB Browser, it appears to be a single step process, much like importing
a file into Excel. In fact it is always a two step process.
First……………</p>
</section><section id="using-the-db-browser-application-to-create-tables"><h2 class="section-heading">Using the DB Browser application to create tables<a class="anchor" aria-label="anchor" href="#using-the-db-browser-application-to-create-tables"></a>
</h2>
<hr class="half-width"><p>So far we have created and populated tables from scratch or created
tables from existing tables. But initially your data is likely to be
external to the relational database system in a set of simple files.
Typically in CSV (comma separated values) or Tab delimited format.</p>
<p>All relational database systems will have some utility which will
allow you to import such files into tables in the database. The DB
Browser application has a nice GUI (Graphical Use Interface) to allow
you to do this.</p>
<p>The Farms, Plots and Crops tables that we have been using were
created in the DB Browser application by importing a CSV file containing
the data.</p>
<p>For large datasets this is a very common approach.</p>
<ol style="list-style-type: decimal"><li><p>From the File menu select ‘Import’ and then ‘Table from CSV
file’. This will start the ‘Import CSV file’ wizard and you will be
asked to select the file of data you wish to import from a standard
Windows file open dialog.</p></li>
<li><p>After you have selected the file, you will be shown the ‘Import
CSV file’ window which will allow you to set a name for the table (the
default is taken from the filename). You will see the first few rows of
the data and there are a few options which can be changed if needs
be.</p></li>
</ol><figure><img src="fig/SQL_07_Import_wizard_01.png" alt="Import table" class="figure mx-auto d-block"></figure><p>In our case all of the options are correctly set. If your file was in
Tab delimited format, you would need to change the ‘Field separator’
option to ‘Tab’. If your file did not have a header row with column
names you would un-check the appropriate box and DB Browser will
allocate names for the columns. (You can change them to more meaningful
names yourself after the import is complete)</p>
<ol start="3" style="list-style-type: decimal"><li>When you click OK, a table will be created and the data loaded into
the table.</li>
</ol><p>Unfortunately this Import wizard in DB Browser does not do, or allow
you to do everything that you might want when creating a table. The most
obvious potential problem is that we were not allowed to specify the
data types to be associated with each of the columns in the table.
However, DB Browser will attempt to work out the appropriate data types
based on the values in the first few rows of the data. This is a very
common approach. (Earlier versions of DB Browser didn’t do this, it just
imported all of the columns as ‘Text’ data types.) If you go to the
table in the Database Structure tab and click the ‘&gt;’ you will see
all of the fields and they are all listed as either Text or Integer
fields.</p>
<p>If any of the datatypes are not as expected or wanted we can change
them.</p>
<ol start="4" style="list-style-type: decimal"><li>Select the newly created table in Database Structure tab and click
the ‘Modify Table’ button in the toolbar. The ‘Edit Table Definition’
dialog will appear.</li>
</ol><figure><img src="fig/SQL_07_Import_Wizard_02.png" alt="Modify Table" class="figure mx-auto d-block"></figure><p>In this particular case DB Browser correctly selected the datatypes.
Notice that the <code>A01_interview_date</code> was allocated a datatype
of ‘TEXT’. This isn’t a problem as we have to use the Date and Time
functions to manipulate dates anyway.</p>
<p>Notice that the bottom pane in the Window shows the SQL DDL statement
that would create the table that you modifying.</p>
<p>When you change one of the columns from TEXT to INTEGER, this is
immediately reflected in the Create Table statement.<br>
It is slightly misleading because in fact we are modifying an existing
table and in SQL-speak, this would be an <strong>Alter Table…</strong>
statement. However it does illustrate quite well the fact that whatever
you do in the GUI, it is essentially translated into an SQL statement
and executed. You could copy and paste this definition into the SQL
editor and if you change the table name before you ran it, you would
create a new table with that name. This new table would have no data in
it. This is how the insert table wizard works. It uses the header row
from your data to create a <code>CREATE TABLE</code> statement which it
runs. It then transforms each of the rows of data into SQL
<code>INSERT INTO...</code> statements which it also runs to get the
data into the table.</p>
<p>In addition to changing the data types there are several other
options which can be set when you are creating of modifying a table. For
our tables we don’t need to make use of them but for completeness we
will describe what they are;</p>
<p><strong>PK</strong> - Or Primary Key, a unique identifier for the
row. In the Farms table, there is an <code>Id</code> column which
uniquely identifies a Farm. This could act as a unique identifier for
the row as a whole. We could mark this as the primary key if we wanted
to.</p>
<p><strong>AI</strong> - Or Auto Increment. This isn’t really applicable
to tables created in this way, i.e. the creation of the schema
immediately followed by loading data from a file. It is usually used to
generate unique values for a column which could then act as a primary
key. If you have an ‘Auto Increment’ column in a table, when you insert
values you would not supply a value for the column as SQLite will
automatically provide a value for each row added.</p>
<p><strong>Not Null</strong> - If this is checked then it means that
there must be a value for each row in this column. If it is
<strong>not</strong> set and there is no value provided in the data then
it will be set to ‘NULL’ which means ‘I know nothing about what should
be here’. (Not the string ‘NULL’ but the NULL value)</p>
<p>In real datasets missing values are quite common and we have already
looked at ways of dealing with them when they occur in tables. If you
were to <strong>check</strong> this box and the data did have missing
values for this column, the record from the file would be rejected and
the load of the file will fail.</p>
<p><strong>U</strong> - Or Unique. This allows you to say that the
contents of the column, which is not the primary key column has to have
unique values in it. Like Allow Null this is another way of providing
some data validation as the data is imported. Although it doesn’t really
apply with the DB Browser import wizard as the data is imported before
you are allowed to set this option.</p>
<p><strong>Default</strong> - This is used in conjunction with ‘Not
Null’, if a value is not provided in the dataset, then if provided, the
default value for that column will be used.</p>
<p><strong>Check</strong> - This allows you to specify a constraint on
the values entered for the column. You could restrict the range of
values or compare the value with other columns values.</p>
<p>These three options, ‘Not Null’, ‘Unique’ and ‘Default’ , need to be
used with caution and certainly their use needs to be fully documented
and explained.</p>
<div id="exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">Exercise<a class="anchor" aria-label="anchor" href="#exercise"></a>
</h3>
<div class="callout-content">
<p>From the Modify table dialog, change the <code>Id</code> column in
the <code>Farms</code> table to be the primary key. What difference did
it make in the <code>CREATE TABLE</code> statement?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">Show me the solution</h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>You need to scroll down to the bottom of the
<code>CREATE TABLE</code> statement to see the</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>    <span class="kw">PRIMARY</span> <span class="kw">KEY</span>(`Id`)</span></code></pre>
</div>
<p>line added.</p>
</div>
</div>
</div>
</div>
</section><section id="creating-a-table-using-an-sql-command"><h2 class="section-heading">Creating a table using an SQL command<a class="anchor" aria-label="anchor" href="#creating-a-table-using-an-sql-command"></a>
</h2>
<hr class="half-width"><p>You could copy and paste this definition into the SQL editor and if
you change the table name before you ran it, you would create a new
table with that name. This new table would have no data in it. This is
how the insert table wizard works. It uses the header row from your data
to create a <code>CREATE TABLE</code> statement which it runs. It then
transforms each of the rows of data into SQL <code>INSERT INTO...</code>
statements which it also runs to get the data into the table.</p>
<p>For small tables defining them and populating them with data in this
way may be acceptable. But for larger tables this approach not only to
defining the tables but adding potentially thousands of rows of data can
be somewhat impractical.</p>
</section><section id="creating-tables-from-other-tables"><h2 class="section-heading">Creating tables from other tables<a class="anchor" aria-label="anchor" href="#creating-tables-from-other-tables"></a>
</h2>
<hr class="half-width"><p>Whenever you write a Select query and run it, the results are always
in the form of a table. In the results pane, you can see the column
names and the rows of data in the results.</p>
<p>This provides a very easy way of creating a new table based on the
results of a query.</p>
<p>The following query selects a few of the columns from the Farms
table:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">Id</span>, </span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>       Country, </span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>       A06_province, </span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>       A07_district,</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>       A08_ward, </span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>       A09_village</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="kw">FROM</span> Farms;</span></code></pre>
</div>
<p>If you want to make the results of this query into a new table, you
can do so by simply prefixing the <code>SELECT</code> with
<strong>CREATE TABLE NewTablename AS</strong> like this:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> Farms_location <span class="kw">AS</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">Id</span>, </span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>       Country, </span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>       A06_province, </span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>       A07_district,</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>       A08_ward, </span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>       A09_village</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="kw">FROM</span> Farms;</span></code></pre>
</div>
<p>If we wanted to create a table from the Crops table which contains
only the rows where the D_curr_crop value was ‘rice’ we could use a
query like this:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> crops_rice <span class="kw">AS</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="kw">FROM</span> Crops</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="kw">WHERE</span> D_curr_crop <span class="op">=</span> <span class="st">'rice'</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>;</span></code></pre>
</div>
<p>Here we want all of the columns from the Crops table but only if the
D_curr_crop value is ‘rice’.</p>
<p><strong>Note</strong>: please ensure that you run the code above as
we will use this new table in a later episode.</p>
</section><section id="using-sql-code-to-create-views"><h2 class="section-heading">Using SQL code to create views<a class="anchor" aria-label="anchor" href="#using-sql-code-to-create-views"></a>
</h2>
<hr class="half-width"><p>In addition to tables all relational database systems have the
concept of ‘Views’. Views are based on tables. In the same way that we
were able to create a table based on a <code>SELECT</code> query, we can
create a ‘View’ in the same way. You just replace ‘Table’ with
‘View’.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">SQL<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode sql" tabindex="0"><code class="sourceCode sql"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">VIEW</span> Farms_location <span class="kw">AS</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">Id</span>, </span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>       Country, </span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>       A06_province, </span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>       A07_district,</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>       A08_ward, </span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>       A09_village</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="kw">FROM</span> Farms;</span></code></pre>
</div>
<p>Tables and Views are so closely related that if you try to run the
code above, although ‘Table’ has been changed to ‘View’ you will get an
error complaining that the ‘Table’ already exists.</p>
<p>It is common practice when creating Views to indicate somewhere in
the name that it is in fact a View. e.g. vFarms_location or
Farms_location_v.</p>
<p>Although tables and views can be used almost interchangeably in
<code>SELECT</code> queries it is important to note that a
<code>View</code> unlike a <code>Table</code> contains no data. It is
essentially the SQL statement needed to produce that data from the
underlying data. This means that when you use a View there is the
overhead of having to run this SQL first. Although in practice the
Database system will combine the SQL required by the View and the other
SQL in your query so as to optimise how the SQL is executed.</p>
<p>The advantage of using Views is that it allows you to restrict how
you see the data in a table. In the example we used above it may be far
easier to work with only the 6 columns that we need from the full Farms
table rather than the full table with 61 columns.</p>
<p>A View isn’t restricted to simple <code>SELECT</code> statements it
can be the result of aggregations and joins as well. This can help
reduce the complexity of queries based on the View and so aid
readability.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul><li>Database tables can be created using the DDL command
<code>CREATE TABLE</code>
</li>
<li>They can be populated using the <code>INSERT INTO</code>
command</li>
<li>The SQLite plugin allows you to create a table and import data into
it in one step</li>
<li>There are many options available to the <code>CREATE TABLE</code>
command which allows greater control over how or what data can be loaded
into the table</li>
<li>A View can be treated just like a table in a query</li>
<li>A View does not contain data like a table does, only the
instructions on how to get the data</li>
</ul></div>
</div>
</div>
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="06-aggregation.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="08-sqlite-command-line.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="06-aggregation.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Aggregations
        </a>
        <a class="chapter-link float-end" href="08-sqlite-command-line.html" rel="next">
          Next: The SQLite command... 
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>
        
        <a href="https://github.com/datacarpentry/sql-socialsci/edit/main/episodes/07-creating-tables-views.md" class="external-link">Edit on GitHub</a>
        
	
        | <a href="https://github.com/datacarpentry/sql-socialsci/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/datacarpentry/sql-socialsci/" class="external-link">Source</a></p>
				<p><a href="https://github.com/datacarpentry/sql-socialsci/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">
        
        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>
        
        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.4" class="external-link">sandpaper (0.16.4)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.5" class="external-link">pegboard (0.7.5)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.2" class="external-link">varnish (1.0.2)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://datacarpentry.github.io/sql-socialsci/07-creating-tables-views.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "Creating tables and views",
  "creativeWorkStatus": "active",
  "url": "https://datacarpentry.github.io/sql-socialsci/07-creating-tables-views.html",
  "identifier": "https://datacarpentry.github.io/sql-socialsci/07-creating-tables-views.html",
  "dateCreated": "2017-05-25",
  "dateModified": "2023-05-02",
  "datePublished": "2024-06-04"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo
    2022-11-07: we have gotten a notification that we have an overage for our
    tracking and I'm pretty sure this has to do with Workbench usage.
    Considering that I am not _currently_ using this tracking because I do not
    yet know how to access the data, I am turning this off for now.
  <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
    _paq.push(["setDomains", ["*.preview.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
    _paq.push(["setDoNotTrack", true]);
    _paq.push(["disableCookies"]);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
          var u="https://carpentries.matomo.cloud/";
          _paq.push(['setTrackerUrl', u+'matomo.php']);
          _paq.push(['setSiteId', '1']);
          var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
          g.async=true; g.src='https://cdn.matomo.cloud/carpentries.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
  </script>
  End Matomo Code --></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

